(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[274],{67879:(e,t,r)=>{"use strict";r.r(t);var a=r(6293),s=r(95122),n=r(3571),c=r(48015),i=r(91991),o=r(92819),u=r(82521),l=r(1528),d=r(31511);const p={render:(0,c.withDispatch)((e=>({addNotice(t,r){e("core/notices").createSuccessNotice(t,{id:r,context:"ithemes-security"}),setTimeout((()=>e("core/notices").removeNotice(r,"ithemes-security")),1e4)}})))((function(e){let{card:t,config:r,addNotice:n}=e;const c=(e,t)=>{e.endsWith("/backup")&&n(t.message,"backup-complete")};return(0,o.isEmpty)(t.data)?(0,a.createElement)("div",{className:"itsec-card--type-database-backup itsec-card-database-backup--no-data"},(0,a.createElement)(l.CardHeader,null,(0,a.createElement)(l.CardHeaderTitle,{card:t,config:r})),(0,a.createElement)("section",{className:"itsec-card-database-backup__no-data-message"},(0,a.createElement)("p",null,(0,s.__)("Enable database logging or file backups to see a history of completed backups.","better-wp-security"))),(0,a.createElement)(l.CardFooterSchemaActions,{card:t,onComplete:c})):(0,a.createElement)("div",{className:`itsec-card--type-database-backup itsec-card-database-backup--source-${t.data.source}`},(0,a.createElement)(l.CardHeader,null,(0,a.createElement)(l.CardHeaderTitle,{card:t,config:r})),(0,a.createElement)("section",{className:"itsec-card-database-backup__total"},(0,a.createElement)("span",{className:"itsec-card-database-backup__total-count"},(0,d.z8)(t.data.total),100===t.data.total&&(0,a.createElement)("sup",null,"+")),(0,a.createElement)("span",{className:"itsec-card-database-backup__total-label"},(0,s.__)("Backups","better-wp-security"))),t.data.backups.length>0&&(0,a.createElement)("section",{className:"itsec-card-database-backup__recent-backups-section","aria-label":(0,s.__)("Recent Backups","better-wp-security")},(0,a.createElement)("table",{className:"itsec-card-database-backup__recent-backups"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-date"},(0,s.__)("Date","better-wp-security")),(0,a.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-size"},(0,s.__)("Size","better-wp-security")),"files"===t.data.source&&(0,a.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-actions"},(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Download","better-wp-security"))))),(0,a.createElement)("tbody",null,(0,o.take)(t.data.backups,50).map((e=>(0,a.createElement)("tr",{key:e.url||e.time},(0,a.createElement)("th",{scope:"row",className:"itsec-card-database-backup__col-date"},(0,a.createElement)("span",{className:"itsec-card-database-backup__backup-date"},(0,u.dateI18n)("M d, Y",e.time))," ",(0,a.createElement)("span",{className:"itsec-card-database-backup__backup-time"},(0,u.dateI18n)("g:i A",e.time))),(0,a.createElement)("td",{className:"itsec-card-database-backup__col-size"},e.size_format),"files"===t.data.source&&(0,a.createElement)("td",{className:"itsec-card-database-backup__col-actions"},e.url&&(0,a.createElement)("a",{href:e.url,download:!0},(0,s.__)("Download","better-wp-security"))))))))),(0,a.createElement)(l.CardFooterSchemaActions,{card:t,onComplete:c}))})),elementQueries:[{type:"width",dir:"max",px:300},{type:"width",dir:"max",px:250},{type:"height",dir:"max",px:300}]};function h(){const{registerCard:e}=(0,c.useDispatch)("ithemes-security/dashboard");return(0,i.eH)(h,(()=>e("database-backup",p))),null}r.p=window.itsecWebpackPublicPath,(0,s.setLocaleData)({"":{}},"ithemes-security-pro"),(0,n.registerPlugin)("itsec-backup-dashboard",{render:()=>(0,a.createElement)(h,null)})},31511:(e,t,r)=>{"use strict";r.d(t,{sE:()=>y,x4:()=>f,PN:()=>p,pL:()=>v,NC:()=>w,N4:()=>k,CO:()=>C,AW:()=>N,SU:()=>O,ZE:()=>_,UC:()=>S,xJ:()=>Z,z8:()=>E,Y3:()=>x,bv:()=>g});var a=r(92819),s=r(6293),n=r(73470),c=r(4942),i=r(13092),o=r(86033);function u(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var l=new WeakMap,d=new WeakMap;class p{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;u(this,l,{writable:!0,value:{}}),u(this,d,{writable:!0,value:{}}),(0,c.Z)(this,"add",((e,t,r)=>((0,o.Z)(this,l)[e]||((0,o.Z)(this,l)[e]=[]),(0,o.Z)(this,l)[e].push(t),r&&((0,o.Z)(this,d)[e]||((0,o.Z)(this,d)[e]=[]),(0,o.Z)(this,d)[e].push(r)),this))),(0,c.Z)(this,"hasErrors",(()=>this.getErrorCodes().length>0)),(0,c.Z)(this,"getErrorCodes",(()=>Object.keys((0,o.Z)(this,l)))),(0,c.Z)(this,"getErrorCode",(()=>this.getErrorCodes()[0])),(0,c.Z)(this,"getErrorMessages",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t)return(0,o.Z)(e,l)[t];const r=[];for(const t in(0,o.Z)(e,l))(0,o.Z)(e,l).hasOwnProperty(t)&&r.concat((0,o.Z)(e,l)[t]);return r})),(0,c.Z)(this,"getErrorMessage",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||e.getErrorCode(),e.getErrorMessages(t)[0]})),(0,c.Z)(this,"getErrorData",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||e.getErrorCode(),(0,o.Z)(e,d)[t]})),(0,c.Z)(this,"getAllErrorMessages",(()=>{const e=[];for(const t in(0,o.Z)(this,l))(0,o.Z)(this,l).hasOwnProperty(t)&&e.push(...(0,o.Z)(this,l)[t]);return e})),t&&(r&&((0,o.Z)(this,l)[t]=[r]),a&&((0,o.Z)(this,d)[t]=a))}static fromPHPObject(e){const t=new p;return(0,i.Z)(t,l,e.errors),(0,i.Z)(t,d,e.error_data),t}static fromApiError(e){const t=new p;if((0,o.Z)(t,l)[e.code]=[e.message],(0,o.Z)(t,d)[e.code]=[e.data],e.additional_errors)for(const r of e.additional_errors)(0,o.Z)(t,l)[r.code]=[r.message],r.data&&((0,o.Z)(t,d)||(0,i.Z)(t,d,[]),(0,o.Z)(t,d)[r.code].push(r.data));return t}}var h=r(95122);class b extends Error{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e.message||(0,h.__)("An unknown error occurred.","better-wp-security"),...r),Error.captureStackTrace&&Error.captureStackTrace(this,b),this.__response=e;for(const t in e)e.hasOwnProperty(t)&&Object.defineProperty(this,t,{value:e[t],configurable:!0,enumerable:!0,writable:!0})}toString(){return this.__response.toString()}getResponse(){return this.__response}}class f{constructor(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];(0,c.Z)(this,"type",void 0),(0,c.Z)(this,"error",void 0),(0,c.Z)(this,"data",void 0),(0,c.Z)(this,"success",void 0),(0,c.Z)(this,"info",void 0),(0,c.Z)(this,"warning",void 0),this.type=e,this.error=t,this.data=r,this.success=a,this.info=s,this.warning=n,Object.seal(this)}isSuccess(){return this.type===f.SUCCESS}static async fromResponse(e){const t=t=>{const r=e.headers?.get(`X-Messages-${t}`);return r?JSON.parse(r):[]},r=204!==e.status&&e.json?await e.json():null,a=w(r),s=a.hasErrors()?f.ERROR:f.SUCCESS,n=t("Success"),c=t("Info"),i=t("Warning");return new f(s,a,r,n,c,i)}}Object.defineProperty(f,"SUCCESS",{value:"success",writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(f,"ERROR",{value:"error",writable:!1,enumerable:!1,configurable:!1});const m=(0,s.createContext)({getUrl(e){e="settings"===e?"itsec":"itsec-"+e;const t=(0,n.removeQueryArgs)(document.location.href,...Object.keys((0,n.getQueryArgs)(document.location.href)));return(0,n.addQueryArgs)(t,{page:e})}});function g(e){const{getUrl:t}=(0,s.useContext)(m);return t(e)}function E(e){if(e<=999)return e.toString();if(e<=9999){const t=(e/1e3).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","k"):`${t}k`}if(e<=99999)return e.toString().substring(0,2)+"k";if(e<=999999)return e.toString().substring(0,3)+"k";if(e<=9999999){const t=(e/1e6).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","m"):`${t}m`}if(e<=99999999)return e.toString().substring(0,2)+"m";if(e<=999999999)return e.toString().substring(0,3)+"m";if(e<=9999999999){const t=(e/1e9).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","b"):`${t}b`}return e}function _(e){if(!(0,a.isPlainObject)(e))return!1;const t=Object.keys(e);return 2===t.length&&t.includes("errors")&&t.includes("error_data")}function w(e){return e instanceof p?e:_(e)?p.fromPHPObject(e):function(e){if(!(0,a.isPlainObject)(e))return!1;const t=Object.keys(e);return(3===t.length||4===t.length)&&!(4===t.length&&!t.includes("additional_errors"))&&t.includes("code")&&t.includes("message")&&t.includes("data")}(e)?p.fromApiError(e):new p}function k(e){const t={};for(const[r,a]of e)t[r]=a;return t}function v(e,t){const r=[[],[]];for(const a of e)r[t(a)?0:1].push(a);return r}function Z(e){if(e instanceof Error)throw e;throw new b(e)}const y="https://secure.gravatar.com/avatar/d7a973c7dab26985da5f961be7b74480?s=96&d=mm&f=y&r=g";function O(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,a.get)(e,["_links","self",0,"targetHints",t],r?void 0:[])}function N(e){return function(e,t){return(0,a.get)(e,["_links","self",0,"href"])}(e)}function C(e,t){if(e&&e.links)for(const r of e.links)if(r.rel===t)return r}function S(e,t){if("object"!==e.type)return e;let r;for(const s in t)t.hasOwnProperty(s)&&"hidden"===t[s]["ui:widget"]&&(r||(r=(0,a.cloneDeep)(e)),delete r.properties[s]);return r||e}function x(e){let t=[];if(!e)return t;const r=e instanceof p?e:w((0,a.pick)(e,["code","message","data"]));return"rest_invalid_param"===r.getErrorCode()&&(t=Object.values(r.getErrorData().params)),[...r.getAllErrorMessages(),...t]}},1528:e=>{e.exports=function(){return this.itsec.dashboard.dashboard}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},82521:e=>{e.exports=function(){return this.wp.date}()},6293:e=>{e.exports=function(){return this.wp.element}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},3571:e=>{e.exports=function(){return this.wp.plugins}()},73470:e=>{e.exports=function(){return this.wp.url}()},92819:e=>{"use strict";e.exports=window.lodash},1519:(e,t,r)=>{"use strict";function a(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r.d(t,{Z:()=>a})},86033:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(1519);function s(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,a.Z)(e,t,"get"))}},13092:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(1519);function s(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,(0,a.Z)(e,t,"set"),r),r}},4942:(e,t,r)=>{"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>a})},87462:(e,t,r)=>{"use strict";function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},a.apply(this,arguments)}r.d(t,{Z:()=>a})}},e=>{e.O(0,[991],(()=>(67879,e(e.s=67879))));var t=e.O();((window.itsec=window.itsec||{}).backup=window.itsec.backup||{}).dashboard=t}]);