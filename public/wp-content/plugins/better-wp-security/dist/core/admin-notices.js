/*! For license information please see admin-notices.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[101],{24691:(e,t,n)=>{"use strict";n.r(t);var i=n(6293),s=n(95122),a=n(25993),c=n.n(a),o=n(64893),r=(n(97157),n(94184)),l=n.n(r),m=n(48015),u=n(35511);function d(){const[e,t]=(0,i.useState)(!1),{notices:n,noticesLoaded:a}=(0,m.useSelect)((e=>({notices:e("ithemes-security/admin-notices").getNotices(),noticesLoaded:e("ithemes-security/admin-notices").areNoticesLoaded()})));return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(o.Button,{id:"itsec-admin-notices-toolbar-trigger",className:l()("ab-item ab-empty-item",{"itsec-admin-notices-toolbar--has-notices":n.length>0}),onClick:()=>t(!e),"aria-expanded":e},(0,i.createElement)("span",{className:"it-icon-itsec"}),(0,i.createElement)("span",{className:"itsec-toolbar-text"},(0,s.__)("Security","better-wp-security")),n.length>0&&(0,i.createElement)("span",{className:"itsec-admin-notices-toolbar-bubble"},(0,i.createElement)("span",{className:"itsec-admin-notices-toolbar-bubble__count"},n.length))),e&&(0,i.createElement)(o.Popover,{className:"itsec-admin-notices-toolbar__popover",noArrow:!0,expandOnMobile:!0,focusOnMount:"container",position:"bottom center",headerTitle:(0,s.__)("Security","better-wp-security"),onClose:()=>t(!1),onFocusOutside:()=>t(!1)},(0,i.createElement)(u.Z,{notices:n,loaded:a,close:()=>t(!1)})))}const p=function(e){let{portalEl:t}=e;return(0,i.createElement)(o.SlotFillProvider,null,(0,i.createPortal)((0,i.createElement)(o.Popover.Slot,null),t),(0,i.createElement)(d,null))};n.p=window.itsecWebpackPublicPath,(0,s.setLocaleData)({"":{}},"better-wp-security"),c()((()=>{const e=document.getElementById("wp-admin-bar-itsec_admin_bar_menu"),t=document.getElementById("itsec-admin-notices-root");return(0,i.render)((0,i.createElement)(p,{portalEl:t}),e)}))},35511:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(6293),s=n(94184),a=n.n(s),c=n(92819),o=n(95122),r=n(64893),l=n(9576),m=n(48015),u=n(15353);function d(e){let{notice:t}=e;return(0,i.createElement)("article",{className:`itsec-admin-notice itsec-admin-notice--severity-${t.severity}`},(0,i.createElement)("header",{className:"itsec-admin-notice__header"},(0,i.createElement)("div",{className:"itsec-admin-notice__header-inset"},(0,i.createElement)("h4",{dangerouslySetInnerHTML:{__html:t.title||g(t.message,t)}}),(0,c.map)(t.actions,((e,n)=>"primary"===e.style&&(0,i.createElement)(p,{key:n,notice:t,action:e}))))),t.title&&t.message&&(0,i.createElement)("section",{className:"itsec-admin-notice__message",dangerouslySetInnerHTML:{__html:(0,u.autop)(g(t.message,t))}}),function(e){return!(0,c.isEmpty)(e.meta)&&(1!==(0,c.size)(e.meta)||!e.meta.hasOwnProperty("created_at"))}(t)&&(0,i.createElement)("dl",{className:"itsec-admin-notice__meta"},(0,c.map)(t.meta,((e,t)=>"created_at"!==t&&(0,i.createElement)(i.Fragment,{key:t},(0,i.createElement)("dt",null,e.label),(0,i.createElement)("dd",null,e.formatted))))),t.meta.created_at&&(0,i.createElement)("footer",{className:"itsec-admin-notice__footer"},(0,i.createElement)("time",{dateTime:t.meta.created_at.value},t.meta.created_at.formatted)))}function p(e){let{notice:t,action:n}=e;const s=(0,m.useSelect)((e=>e("ithemes-security/admin-notices").getInProgressActions(t.id).includes(n.id)),[t.id,n.id]),{doNoticeAction:a}=(0,m.useDispatch)("ithemes-security/admin-notices"),{fetchModules:c}=(0,m.useDispatch)("ithemes-security/modules")||{};return n.route&&window.itsec?.pages?.settings?.history?(0,i.createElement)(h,{route:n.route,title:n.title,history:window.itsec?.pages?.settings?.history}):(0,i.createElement)(r.Button,{href:n.uri,onClick:async e=>{n.uri||(e.preventDefault(),await a(t.id,n.id),c?.())},isBusy:s},n.title)}function h(e){let{title:t,route:n,history:s}=e;return(0,i.createElement)(r.Button,{onClick:()=>s.push(n),href:s.createHref(n)},t)}function g(e,t){for(const n in t.actions)t.actions.hasOwnProperty(n)&&""!==t.actions[n].uri&&(e=e.replace("{{ $"+n+" }}",t.actions[n].uri));return e}const _=(0,l.compose)([(0,m.withDispatch)((e=>({doAction:e("ithemes-security/admin-notices").doNoticeAction}))),(0,m.withSelect)(((e,t)=>({inProgress:e("ithemes-security/admin-notices").getInProgressActions(t.notice.id)})))])((function(e){let{notice:t,doAction:n,inProgress:s}=e;const a=[];for(const e in t.actions){if(!t.actions.hasOwnProperty(e))continue;const c=t.actions[e];"close"===c.style&&a.push((0,i.createElement)("li",{key:e},(0,i.createElement)(r.Button,{icon:"dismiss",label:c.title,onClick:()=>n(t.id,e),isBusy:s.includes(e)})))}const l=function(e){const t={};for(const n in e.actions){if(!e.actions.hasOwnProperty(n))continue;const i=e.actions[n];"close"!==i.style&&"primary"!==i.style&&(t[n]=i)}return t}(t);return(0,c.isEmpty)(l)||a.push((0,i.createElement)("li",{key:"more"},(0,i.createElement)(r.Dropdown,{position:"bottom right",className:"itsec-admin-notice-list-actions__more-menu",contentClassName:"itsec-admin-notice-list-actions__more-menu-items",renderToggle:e=>{let{isOpen:t,onToggle:n}=e;return(0,i.createElement)(r.Button,{icon:"ellipsis",label:(0,o.__)("More Actions","better-wp-security"),onClick:n,"aria-haspopup":!0,"aria-expanded":t})},renderContent:()=>(0,i.createElement)(r.NavigableMenu,{role:"menu"},(0,c.map)(l,((e,a)=>e.uri?(0,i.createElement)(r.Button,{key:a,href:e.uri},e.title):(0,i.createElement)(r.Button,{key:a,onClick:()=>n(t.id,a),disabled:s.includes(a)},e.title,s.includes(a)&&(0,i.createElement)(r.Spinner,null)))))}))),(0,i.createElement)("ul",{className:"itsec-admin-notice-list-actions"},a)})),E=function(e){let{notices:t}=e;return(0,i.createElement)("ul",{className:"itsec-admin-notice-list"},t.map((e=>(0,i.createElement)("li",{className:"itsec-admin-notice-list-item-container",key:e.id},(0,i.createElement)(_,{notice:e}),(0,i.createElement)(d,{notice:e,noticeId:e.id})))))},f=(0,l.compose)([(0,m.withSelect)((e=>({mutedHighlights:e("ithemes-security/admin-notices").getMutedHighlights(),mutedHighlightUpdatesInFlight:e("ithemes-security/admin-notices").getMutedHighlightUpdatesInFlight()}))),(0,m.withDispatch)((e=>({updateMutedHighlight:e("ithemes-security/admin-notices").updateMutedHighlight})))])((function(e){let{notices:t,loaded:n,mutedHighlights:s,mutedHighlightUpdatesInFlight:l,updateMutedHighlight:m}=e;const[u,d]=(0,i.useState)(!1);return(0,i.createElement)("div",{className:a()("itsec-admin-notice-panel",{"itsec-admin-notice-panel--is-configuring":u})},(0,i.createElement)(r.Button,{icon:"admin-generic",label:(0,o.__)("Configure","better-wp-security"),className:"itsec-admin-notice-panel__configure-trigger",style:{opacity:(0,c.size)(s)>0?1:0},onClick:()=>d(!u)}),(0,i.createElement)("header",{className:"itsec-admin-notice-panel__header"},(0,i.createElement)("h3",null,(0,o.__)("Security Admin Messages","better-wp-security")),(0,i.createElement)("p",null,(0,o.__)("Important notices from iThemes Security","better-wp-security"))),u&&(0,i.createElement)("ul",{className:"itsec-admin-notice-panel__configure-highlighted-logs"},[{slug:"file-change-report",label:(0,o.__)("File Change Report","better-wp-security")},{slug:"notification-center-send-failed",label:(0,o.__)("Notification Center Errors","better-wp-security")},{slug:"malware-scan-report",label:(0,o.__)("Malware Scan Report","better-wp-security")},{slug:"malware-scan-failed",label:(0,o.__)("Malware Scan Failed","better-wp-security")},{slug:"site-scanner-report",label:(0,o.__)("Site Scan Report","better-wp-security")}].map((e=>{let{slug:t,label:a}=e;return void 0!==s[t]&&(0,i.createElement)("li",null,(0,i.createElement)("label",{htmlFor:`itsec-mute-highlight-${t}`},a),(0,i.createElement)(r.FormToggle,{id:`itsec-mute-highlight-${t}`,disabled:!n||l[t],checked:!(0,c.get)(l,[t,"mute"],s[t]),onChange:()=>m(t,!s[t])}))}))),t.length>0?(0,i.createElement)(E,{notices:t}):n&&(0,i.createElement)("span",null,(0,o.__)("No notices at the moment.","better-wp-security")))}))},94184:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var c=s.apply(null,n);c&&e.push(c)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var o in n)i.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},97157:e=>{e.exports=function(){return this.itsec.core["admin-notices-api"]}()},15353:e=>{e.exports=function(){return this.wp.autop}()},64893:e=>{e.exports=function(){return this.wp.components}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},25993:e=>{e.exports=function(){return this.wp.domReady}()},6293:e=>{e.exports=function(){return this.wp.element}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},92819:e=>{"use strict";e.exports=window.lodash}},e=>{var t=(24691,e(e.s=24691));((window.itsec=window.itsec||{}).core=window.itsec.core||{})["admin-notices"]=t}]);