/*! For license information please see admin-notices-dashboard-admin-bar.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[840],{27445:(e,t,i)=>{"use strict";i.r(t);var n=i(6293),s=i(3571),a=(i(97157),i(10906)),c=i(23303);i.p=window.itsecWebpackPublicPath,(0,s.registerPlugin)("itsec-admin-notices-dashboard-admin-bar",{render:()=>(0,n.createElement)(a.AdminBarFill,null,(0,n.createElement)(c.Z,null))})},35511:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var n=i(6293),s=i(94184),a=i.n(s),c=i(92819),o=i(95122),r=i(64893),l=i(9576),m=i(48015),u=i(15353);function d(e){let{notice:t}=e;return(0,n.createElement)("article",{className:`itsec-admin-notice itsec-admin-notice--severity-${t.severity}`},(0,n.createElement)("header",{className:"itsec-admin-notice__header"},(0,n.createElement)("div",{className:"itsec-admin-notice__header-inset"},(0,n.createElement)("h4",{dangerouslySetInnerHTML:{__html:t.title||g(t.message,t)}}),(0,c.map)(t.actions,((e,i)=>"primary"===e.style&&(0,n.createElement)(h,{key:i,notice:t,action:e}))))),t.title&&t.message&&(0,n.createElement)("section",{className:"itsec-admin-notice__message",dangerouslySetInnerHTML:{__html:(0,u.autop)(g(t.message,t))}}),function(e){return!(0,c.isEmpty)(e.meta)&&(1!==(0,c.size)(e.meta)||!e.meta.hasOwnProperty("created_at"))}(t)&&(0,n.createElement)("dl",{className:"itsec-admin-notice__meta"},(0,c.map)(t.meta,((e,t)=>"created_at"!==t&&(0,n.createElement)(n.Fragment,{key:t},(0,n.createElement)("dt",null,e.label),(0,n.createElement)("dd",null,e.formatted))))),t.meta.created_at&&(0,n.createElement)("footer",{className:"itsec-admin-notice__footer"},(0,n.createElement)("time",{dateTime:t.meta.created_at.value},t.meta.created_at.formatted)))}function h(e){let{notice:t,action:i}=e;const s=(0,m.useSelect)((e=>e("ithemes-security/admin-notices").getInProgressActions(t.id).includes(i.id)),[t.id,i.id]),{doNoticeAction:a}=(0,m.useDispatch)("ithemes-security/admin-notices"),{fetchModules:c}=(0,m.useDispatch)("ithemes-security/modules")||{};return i.route&&window.itsec?.pages?.settings?.history?(0,n.createElement)(p,{route:i.route,title:i.title,history:window.itsec?.pages?.settings?.history}):(0,n.createElement)(r.Button,{href:i.uri,onClick:async e=>{i.uri||(e.preventDefault(),await a(t.id,i.id),c?.())},isBusy:s},i.title)}function p(e){let{title:t,route:i,history:s}=e;return(0,n.createElement)(r.Button,{onClick:()=>s.push(i),href:s.createHref(i)},t)}function g(e,t){for(const i in t.actions)t.actions.hasOwnProperty(i)&&""!==t.actions[i].uri&&(e=e.replace("{{ $"+i+" }}",t.actions[i].uri));return e}const f=(0,l.compose)([(0,m.withDispatch)((e=>({doAction:e("ithemes-security/admin-notices").doNoticeAction}))),(0,m.withSelect)(((e,t)=>({inProgress:e("ithemes-security/admin-notices").getInProgressActions(t.notice.id)})))])((function(e){let{notice:t,doAction:i,inProgress:s}=e;const a=[];for(const e in t.actions){if(!t.actions.hasOwnProperty(e))continue;const c=t.actions[e];"close"===c.style&&a.push((0,n.createElement)("li",{key:e},(0,n.createElement)(r.Button,{icon:"dismiss",label:c.title,onClick:()=>i(t.id,e),isBusy:s.includes(e)})))}const l=function(e){const t={};for(const i in e.actions){if(!e.actions.hasOwnProperty(i))continue;const n=e.actions[i];"close"!==n.style&&"primary"!==n.style&&(t[i]=n)}return t}(t);return(0,c.isEmpty)(l)||a.push((0,n.createElement)("li",{key:"more"},(0,n.createElement)(r.Dropdown,{position:"bottom right",className:"itsec-admin-notice-list-actions__more-menu",contentClassName:"itsec-admin-notice-list-actions__more-menu-items",renderToggle:e=>{let{isOpen:t,onToggle:i}=e;return(0,n.createElement)(r.Button,{icon:"ellipsis",label:(0,o.__)("More Actions","better-wp-security"),onClick:i,"aria-haspopup":!0,"aria-expanded":t})},renderContent:()=>(0,n.createElement)(r.NavigableMenu,{role:"menu"},(0,c.map)(l,((e,a)=>e.uri?(0,n.createElement)(r.Button,{key:a,href:e.uri},e.title):(0,n.createElement)(r.Button,{key:a,onClick:()=>i(t.id,a),disabled:s.includes(a)},e.title,s.includes(a)&&(0,n.createElement)(r.Spinner,null)))))}))),(0,n.createElement)("ul",{className:"itsec-admin-notice-list-actions"},a)})),_=function(e){let{notices:t}=e;return(0,n.createElement)("ul",{className:"itsec-admin-notice-list"},t.map((e=>(0,n.createElement)("li",{className:"itsec-admin-notice-list-item-container",key:e.id},(0,n.createElement)(f,{notice:e}),(0,n.createElement)(d,{notice:e,noticeId:e.id})))))},y=(0,l.compose)([(0,m.withSelect)((e=>({mutedHighlights:e("ithemes-security/admin-notices").getMutedHighlights(),mutedHighlightUpdatesInFlight:e("ithemes-security/admin-notices").getMutedHighlightUpdatesInFlight()}))),(0,m.withDispatch)((e=>({updateMutedHighlight:e("ithemes-security/admin-notices").updateMutedHighlight})))])((function(e){let{notices:t,loaded:i,mutedHighlights:s,mutedHighlightUpdatesInFlight:l,updateMutedHighlight:m}=e;const[u,d]=(0,n.useState)(!1);return(0,n.createElement)("div",{className:a()("itsec-admin-notice-panel",{"itsec-admin-notice-panel--is-configuring":u})},(0,n.createElement)(r.Button,{icon:"admin-generic",label:(0,o.__)("Configure","better-wp-security"),className:"itsec-admin-notice-panel__configure-trigger",style:{opacity:(0,c.size)(s)>0?1:0},onClick:()=>d(!u)}),(0,n.createElement)("header",{className:"itsec-admin-notice-panel__header"},(0,n.createElement)("h3",null,(0,o.__)("Security Admin Messages","better-wp-security")),(0,n.createElement)("p",null,(0,o.__)("Important notices from iThemes Security","better-wp-security"))),u&&(0,n.createElement)("ul",{className:"itsec-admin-notice-panel__configure-highlighted-logs"},[{slug:"file-change-report",label:(0,o.__)("File Change Report","better-wp-security")},{slug:"notification-center-send-failed",label:(0,o.__)("Notification Center Errors","better-wp-security")},{slug:"malware-scan-report",label:(0,o.__)("Malware Scan Report","better-wp-security")},{slug:"malware-scan-failed",label:(0,o.__)("Malware Scan Failed","better-wp-security")},{slug:"site-scanner-report",label:(0,o.__)("Site Scan Report","better-wp-security")}].map((e=>{let{slug:t,label:a}=e;return void 0!==s[t]&&(0,n.createElement)("li",null,(0,n.createElement)("label",{htmlFor:`itsec-mute-highlight-${t}`},a),(0,n.createElement)(r.FormToggle,{id:`itsec-mute-highlight-${t}`,disabled:!i||l[t],checked:!(0,c.get)(l,[t,"mute"],s[t]),onChange:()=>m(t,!s[t])}))}))),t.length>0?(0,n.createElement)(_,{notices:t}):i&&(0,n.createElement)("span",null,(0,o.__)("No notices at the moment.","better-wp-security")))}))},23303:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var n=i(6293),s=i(94184),a=i.n(s),c=i(64893),o=i(95122),r=i(48015),l=i(35511);function m(){const[e,t]=(0,n.useState)(!1),{notices:i,noticesLoaded:s}=(0,r.useSelect)((e=>({notices:e("ithemes-security/admin-notices").getNotices(),noticesLoaded:e("ithemes-security/admin-notices").areNoticesLoaded()})),[]);return(0,n.createElement)(React.Fragment,null,(0,n.createElement)(c.ToolbarButton,{"aria-expanded":e,onClick:()=>t(!e),icon:"bell",text:(0,o.__)("Alerts","better-wp-security"),className:a()("itsec-admin-bar-admin-notices__trigger",{"itsec-admin-bar-admin-notices__trigger--has-notices":i.length>0})}),e&&(0,n.createElement)(c.Popover,{className:"itsec-admin-bar-admin-notices__content",expandOnMobile:!0,focusOnMount:"container",position:"bottom left",headerTitle:(0,o.__)("Notifications","better-wp-security"),onClose:()=>t(!1),onFocusOutside:()=>t(!1)},(0,n.createElement)(l.Z,{notices:i,loaded:s,close:()=>t(!1)})))}},94184:(e,t)=>{var i;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var c=s.apply(null,i);c&&e.push(c)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var o in i)n.call(i,o)&&i[o]&&e.push(o);else e.push(i.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()},97157:e=>{e.exports=function(){return this.itsec.core["admin-notices-api"]}()},10906:e=>{e.exports=function(){return this.itsec.dashboard.api}()},15353:e=>{e.exports=function(){return this.wp.autop}()},64893:e=>{e.exports=function(){return this.wp.components}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},6293:e=>{e.exports=function(){return this.wp.element}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},3571:e=>{e.exports=function(){return this.wp.plugins}()},92819:e=>{"use strict";e.exports=window.lodash}},e=>{var t=(27445,e(e.s=27445));((window.itsec=window.itsec||{}).core=window.itsec.core||{})["admin-notices-dashboard-admin-bar"]=t}]);